# ─── Identity ───────────────────────────────────────────
# CRITICAL: Use did:plc for the feed generator. did:web is fragile.
# Generate once with scripts/create-did-plc.ts and NEVER change.
FEEDGEN_SERVICE_DID="did:plc:xxxxxxxxxxxxxxxxxxxxxxxx"

# The DID of the Bluesky account that will publish the feed
FEEDGEN_PUBLISHER_DID="did:plc:yyyyyyyyyyyyyyyyyyyyyyyy"

# The hostname where this feed generator will be publicly accessible
FEEDGEN_HOSTNAME="feed.yourdomain.com"

# ─── Server ─────────────────────────────────────────────
FEEDGEN_PORT=3000
FEEDGEN_LISTENHOST="0.0.0.0"

# ─── Jetstream ──────────────────────────────────────────
# Primary and fallback Jetstream instances
JETSTREAM_URL="wss://jetstream2.us-east.bsky.network/subscribe"
JETSTREAM_FALLBACK_URL="wss://jetstream1.us-east.bsky.network/subscribe"

# Collections to subscribe to (comma-separated)
JETSTREAM_COLLECTIONS="app.bsky.feed.post,app.bsky.feed.like,app.bsky.feed.repost,app.bsky.graph.follow"

# ─── Database ───────────────────────────────────────────
DATABASE_URL="postgresql://postgres:postgres@localhost:5432/community_feed"

# ─── Redis ──────────────────────────────────────────────
REDIS_URL="redis://localhost:6379"

# ─── Scoring ────────────────────────────────────────────
# How often the scoring pipeline runs (cron expression)
SCORING_INTERVAL_CRON="*/5 * * * *"

# How old posts can be before they're excluded from scoring (hours)
SCORING_WINDOW_HOURS=72

# Maximum posts to keep in the ranked feed cache
FEED_MAX_POSTS=1000

# ─── Governance ─────────────────────────────────────────
# Minimum number of votes before a new epoch can be triggered
GOVERNANCE_MIN_VOTES=5

# How long a governance voting period lasts (hours)
GOVERNANCE_PERIOD_HOURS=168

# ─── Bluesky API (for enrichment queries) ───────────────
# Use app password, NOT your main password
BSKY_IDENTIFIER="your-bot-handle.bsky.social"
BSKY_APP_PASSWORD="xxxx-xxxx-xxxx-xxxx"

# ─── Optional ───────────────────────────────────────────
# Polis conversation ID (if using Polis for deliberation)
POLIS_CONVERSATION_ID=""

# Log level: debug, info, warn, error
LOG_LEVEL="info"

# Node environment
NODE_ENV="development"

# ─── Announcement Bot (Optional) ────────────────────────
# Enable the announcement bot for governance events
BOT_ENABLED=false

# Bot's Bluesky handle (create a separate account for the bot)
BOT_HANDLE="feed-announcements.bsky.social"

# App password for the bot account
BOT_APP_PASSWORD="xxxx-xxxx-xxxx-xxxx"

# Admin DIDs allowed to post manual announcements (comma-separated)
BOT_ADMIN_DIDS="did:plc:youradmindid"

# How long to keep announcements pinned at top of feed (hours)
BOT_PIN_TTL_HOURS=24
